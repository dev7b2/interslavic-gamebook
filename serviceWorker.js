!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=432)}({13:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return s}));var r="data/",a=r+"index.json",o="spacerangers-images",i="spacerangers-music-mp3",c="spacerangers-music",s="Dear serviceWorker, please do a skipWaiting call"},432:function(e,t,n){"use strict";n.r(t);n(433);var r=n(13),a=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},c=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u="spacerangers-engine-2023-08-12T17:34:52.155Z",l=c(c(["/",r.e],i(serviceWorkerOption.assets)),["/?version="+new Date("2023-08-12T17:34:52.155Z").getTime()]);function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}f("Service version 2023-08-12T17:34:52.155Z worker engine urls: ",l),self.addEventListener("install",(function(e){f("Serviceworker got install event."),e.waitUntil(a(void 0,void 0,void 0,(function(){var e,t,n;return o(this,(function(a){switch(a.label){case 0:return f("Downloading index.json"),[4,fetch(r.e).then((function(e){return e.json()}))];case 1:return e=a.sent(),[4,caches.open(u)];case 2:return t=a.sent(),f("Serviceworker opened engine cache='"+u+"', downloading engine"),[4,t.addAll(l)];case 3:return a.sent(),[4,caches.open("spacerangers-quests")];case 4:return n=a.sent(),f("Serviceworker opened quests cache='spacerangers-quests', downloading quests size="+e.dir.quests.totalSize),[4,n.addAll(e.dir.quests.files.map((function(e){return r.d+e.filePath+e.fileName})))];case 5:return a.sent(),f("Catching done"),[2]}}))})).catch((function(e){throw console.error("Error in sw",e),e})))})),self.addEventListener("activate",(function(e){f("ServiceWorker activation started"),e.waitUntil(a(void 0,void 0,void 0,(function(){var e,t,n,a,i,c;return o(this,(function(o){switch(o.label){case 0:return[4,caches.has(r.c)];case 1:return o.sent()?(f("dropping old ogg music cache "+r.c),[4,caches.delete(r.c)]):[3,3];case 2:o.sent(),o.label=3;case 3:return o.trys.push([3,9,10,11]),[4,caches.keys()];case 4:e=s.apply(void 0,[o.sent().filter((function(e){return 0===e.indexOf("spacerangers-engine")})).filter((function(e){return e!==u}))]),t=e.next(),o.label=5;case 5:return t.done?[3,8]:(f("Removing old engine cache "+(n=t.value)),[4,caches.delete(n)]);case 6:o.sent(),o.label=7;case 7:return t=e.next(),[3,5];case 8:return[3,11];case 9:return a=o.sent(),i={error:a},[3,11];case 10:try{t&&!t.done&&(c=e.return)&&c.call(e)}finally{if(i)throw i.error}return[7];case 11:return f("Service worker claiming clients"),[4,self.clients.claim()];case 12:return o.sent(),f("Service worker activation finished"),[2]}}))})))})),self.addEventListener("fetch",(function(e){e.respondWith(a(void 0,void 0,void 0,(function(){var t,n,a,i,c,s,l,d;return o(this,(function(o){switch(o.label){case 0:return[4,caches.open(u).then((function(t){return t.match(e.request.url)}))];case 1:return(i=o.sent())?[3,3]:[4,caches.open("spacerangers-quests").then((function(t){return t.match(e.request.url)}))];case 2:i=o.sent(),o.label=3;case 3:return(a=i)?[3,5]:[4,caches.open(r.a).then((function(t){return t.match(e.request.url)}))];case 4:a=o.sent(),o.label=5;case 5:return(n=a)?[3,7]:[4,caches.open(r.b).then((function(t){return t.match(e.request.url)}))];case 6:n=o.sent(),o.label=7;case 7:return t=n,(c=e.request.headers.get("range"))?(f("headersRange='"+c+"'"),(s=c.match(/^bytes\=(\d+)\-$/))?(l=parseInt(s[1]),f("Range request for "+e.request.url+", starting position: "+l),t?[3,8]:(f("No audio cache for "+e.request.url),[2,fetch(e.request)])):[2,fetch(e.request)]):[3,10];case 8:return f("Cache audio hit for "+e.request.url),[4,t.arrayBuffer()];case 9:return d=o.sent(),[2,new Response(d.slice(l),{status:206,statusText:"Partial Content",headers:[["Content-Range","bytes "+l+"-"+(d.byteLength-1)+"/"+d.byteLength]]})];case 10:return t?(f("Cache hit for "+e.request.url),[2,t]):(f("No cache for "+e.request.url),[2,fetch(e.request)])}}))})))})),self.addEventListener("message",(function(e){if(f("Got a message="+e.data),e.data===r.f)return f("service worker will skipWaiting and start to activate"),self.skipWaiting()}))},433:function(e,t,n){}});
//# sourceMappingURL=serviceWorker.js.map